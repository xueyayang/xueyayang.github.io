---
layout: default
---

三种图像格式的定义
==================

1 问题
====
RGB是直觉的图像格式。计算机处理时，用的更多的是压缩后的:YUYV，NV21，NV12。
在v4l2系统里，通常又写作`V4L2_PIX_FMT_YUYV`，`V4L2_PIX_FMT_NV16`，`V4L2_PIX_FMT_NV12`。

这是换到了YUV空间，同时，还进行了压缩。

给定一幅图像，W=640，H=480，8位图像。RGB三通道的体积显然是： WxHx3。 

2 理解
====
从几方面考虑：

1. 采样（关系如何还原到RGB给人类看）
2. 排列
3. 大小

2.1 YUYV
----
这个从名字就可以看出来，排列是`Y-U-Y-V`。最好理解，不易弄错。

1. 采样： 水平方向，每两个像素点，出一对UV。
2. 排列： 如名字，交错排列
3. 大小： Y-U-V | Y-U-V ---> Y-U | Y-V。 3通道变2通道，显然大小为: WxHx2
4. 422：  以4X4图像为例，一行有
	- Y： 4
	- U： 2
	- V： 2

2.2 NV16
----
不知道16代表什么意思。但肯定比下面的`12`大。所以体积也大。同时，1和6表示交错进行。

以YUYV为基准考虑：

1. 采样：相同, 水平方向，每两个像素点，出一对UV。
2. 大小：相同, WxHx2
3. 排列：先是Y-Plane, 然后Cb-Cr交错排列。



2.3 NV12
----
以NV16为基准，考虑：

- 采样： 水平+垂直，四个像素点，出一对UV。	
	- Y： 不变，WxH
	- U：4取1，(W/2)*(H/2)
	- V：4取1，(W/2)*(H/2)
	- 总： (1 + 1/4 + 1/4) 
- 大小： 压缩的更厉害，WxHx3/2。这样写防止直接乘以1.5带来的数值损失（考虑int）。
- 排列： 先是Y-Plane，然后是Cb-Cr交错排列。


2.4 其它
----
搞清楚上面三种，可以认为其它的都是变种。如:

- `NV61`是把Cb-Cr的顺序颠倒成Cr-Cb；
- `NV21`是把Cb-Cr的顺序颠倒成Cr-Cb。

3 总结
====
- 记住又忘，记住又忘，希望这次不会。
- 加上前缀变为，含义不变。
- 官方文档在[linuxtv.org][1]

[1]: http://linuxtv.org/downloads/v4l-dvb-apis/index.html
